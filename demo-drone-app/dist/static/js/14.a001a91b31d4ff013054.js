webpackJsonp([14],{b7Ir:function(t,e,n){var a=n("dAHU");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("38db66c6",a,!0,{})},dAHU:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Roboto:300,400,500);",""]),e.push([t.i,"\n.mission_body {\n\tfont-family: 'Roboto', sans-serif;\n\tbackground-color: #f0f0f0;\n}\n","",{version:3,sources:["/Users/samcrane/Documents/Repositories/SAR-Spring-2018/Front-End/demo-drone-app/src/components/FlightsPage.vue"],names:[],mappings:";AAEA;CACC,kCAAkC;CAClC,0BAA0B;CAC1B",file:"FlightsPage.vue",sourcesContent:["\n@import url('https://fonts.googleapis.com/css?family=Roboto:300,400,500');\n.mission_body {\n\tfont-family: 'Roboto', sans-serif;\n\tbackground-color: #f0f0f0;\n}\n"],sourceRoot:""}])},gk9H:function(t,e,n){"use strict";function a(t){n("b7Ir")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("cPEA"),s=n("7+uW"),r=(n("3EgV"),n("YaEn")),o=n("PyoC"),c=n("vWmO");s.a.use(i,{load:{installComponents:!0,key:"AIzaSyCtbjOc1SD9ozYtUVzrtxd0PDxRpN-0JGs"}});var l={name:"MissionsPage",mixins:[o.a],user_info:null,components:{mapTemplate:c.default},data:function(){return{newCenter:"",zoom:4,rppi:[10,20,40,{text:"All",value:-1}],mapType:"hybrid",scrollwheel:!1,max25chars:function(t){return t.length<=25||"Input too long!"},tmp:"",search:"",pagination:{},headers:[{text:"Title",align:"left",value:"title"},{text:"Commander",align:"center",value:"commander"},{text:"Drones",align:"center",value:"Drones#"},{text:"Start Date",align:"center",value:"starts_at"},{text:"Status",align:"center",value:"legal_status"}],items:[],start_date:"1999-01-01",start_menu:!1,start_time:"00:00:00",start_time_menu:!1,end_date:"2020-01-01",end_menu:!1,end_time:"00:00:00",end_time_menu:!1,clearance_states:["APPROVED","DECLINED"],is_gov_official:!1,y:"top",x:null,mode:"",mapLoaded:!1}},methods:{can_delete:function(t){return this.user_info.id==t},_state:function(t){return null!=t&&t.state},getMissions:function(){var t=this,e=this.start_date+" "+this.start_time,n=this.end_date+" "+this.end_time;this.get_missions_v1_1(e,n,function(e){t.items=e.data;for(var n=0;n<t.items.length;n++){var a=t.items[n].area;t.items[n].polygons=[],t.items[n].paths=[];var i=[],s=0,r={min:200,max:-200,range:0},o=0,c={min:200,max:-200,range:0};if(a.features.length>0){for(var l=a.features[0].geometry.coordinates.length,m=0;m<a.features.length;m++)for(var d in a.features[m].geometry.coordinates)i.push({lat:a.features[m].geometry.coordinates[d][0],lng:a.features[m].geometry.coordinates[d][1]}),s+=a.features[m].geometry.coordinates[d][0],a.features[m].geometry.coordinates[d][0]>r.max&&(r.max=a.features[m].geometry.coordinates[d][0]),a.features[m].geometry.coordinates[d][0]<r.min&&(r.min=a.features[m].geometry.coordinates[d][0]),a.features[m].geometry.coordinates[d][1]>c.max&&(c.max=a.features[m].geometry.coordinates[d][1]),a.features[m].geometry.coordinates[d][1]<c.min&&(c.min=a.features[m].geometry.coordinates[d][1]),o+=a.features[m].geometry.coordinates[d][1];r.range=Math.abs(r.max)-Math.abs(r.min),c.range=Math.abs(c.max)-Math.abs(c.min);var u=Math.max(r.range,c.range);t.items[n].zoom=-1.420533814*Math.log(u)+6.8957137,t.items[n].paths=i,t.items[n].center={lat:s/l,lng:o/l}}}},function(t){alert("Hmmm something went wrong with our servers when fetching stations!! Sorry Ladd!"),console.log(t)})},setEvent:function(t,e){google.maps.event.addListener(t,"dragend",function(n){e.polygons[t.id].setPath(t.getPath())})},update_clearance:function(t){var e=this;this.edit_clearance(t.id,t.clearance.state,function(t){e.$emit("snackbar",6e3,"Clearance updated.")},function(t){alert("Error connecting to servers!")})},goToMission:function(t){r.a.push("map?id="+t)},deleteMission:function(t){var e=this;this.delete_mission(t,function(t){alert("Mission deleted!"),e.getMissions()},function(t){})},newMission:function(){r.a.push("/newflight")}},beforeMount:function(){var t=this;this.is_government_official(function(e){"True"==e.data?t.is_gov_official=!0:t.is_gov_official=!1},function(t){alert("Error Connecting to servers!")}),this.getMissions(),this.get_user_info(function(e){if(200!=e.status)throw error;t.user_info=e.data},function(t){console.log("Error grabbing user data!")})},mounted:function(){}},m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",{staticClass:"mission_body"},[n("v-layout",{staticStyle:{"margin-top":"70px"},attrs:{row:""}},[n("v-layout",{attrs:{column:""}},[n("v-card",{staticStyle:{margin:"20px"}},[n("v-card-title",[n("v-flex",[n("h3",[t._v("\n\t\t\t\t\t\t\tFILTERS\n\t\t\t\t\t\t")])])],1),t._v(" "),n("v-card-text",[n("v-flex",[n("v-layout",{attrs:{row:""}},[n("v-menu",{ref:"menuDate",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px"},model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[n("v-text-field",{staticStyle:{margin:"2%",width:"96%"},attrs:{slot:"activator",label:"Start Date",readonly:""},slot:"activator",model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}}),t._v(" "),n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("v-date-picker",{ref:"picker",attrs:{color:"green darken-4",min:(new Date).toISOString().substr(0,10),max:(new Date).toISOString().substr(0,10)},on:{change:function(t){}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)]),t._v(" "),n("v-card-actions",[n("v-btn",{staticStyle:{"background-color":"#1d561a"},attrs:{dark:""},on:{click:function(e){t.start_menu=!1}}},[t._v("OK")])],1)],1)],1),t._v(" "),n("v-menu",{ref:"menuDate",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px"},model:{value:t.start_time_menu,callback:function(e){t.start_time_menu=e},expression:"start_time_menu"}},[n("v-text-field",{staticStyle:{margin:"2%",width:"96%"},attrs:{slot:"activator",label:"Start Time",readonly:""},slot:"activator",model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}}),t._v(" "),n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("v-time-picker",{ref:"picker",attrs:{color:"green darken-4",min:(new Date).toISOString().substr(0,10),max:(new Date).toISOString().substr(0,10)},on:{change:function(t){}},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1)]),t._v(" "),n("v-card-actions",[n("v-btn",{staticStyle:{"background-color":"#1d561a"},attrs:{dark:""},on:{click:function(e){t.start_time_menu=!1}}},[t._v("OK")])],1)],1)],1)],1)],1),t._v(" "),n("v-flex",[n("v-layout",{attrs:{row:""}},[n("v-menu",{ref:"menuDate",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px"},model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[n("v-text-field",{staticStyle:{margin:"2%",width:"96%"},attrs:{slot:"activator",label:"End Date",readonly:""},slot:"activator",model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}}),t._v(" "),n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("v-date-picker",{ref:"picker",attrs:{color:"green darken-4",min:(new Date).toISOString().substr(0,10),max:(new Date).toISOString().substr(0,10)},on:{change:function(t){}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)]),t._v(" "),n("v-card-actions",[n("v-btn",{staticStyle:{"background-color":"#1d561a"},attrs:{dark:""},on:{click:function(e){t.end_menu=!1}}},[t._v("OK")])],1)],1)],1),t._v(" "),n("v-menu",{ref:"menuDate",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px"},model:{value:t.end_time_menu,callback:function(e){t.end_time_menu=e},expression:"end_time_menu"}},[n("v-text-field",{staticStyle:{margin:"2%",width:"96%"},attrs:{slot:"activator",label:"End Time",readonly:""},slot:"activator",model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}}),t._v(" "),n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("v-time-picker",{ref:"picker",attrs:{color:"green darken-4",min:(new Date).toISOString().substr(0,10),max:(new Date).toISOString().substr(0,10)},on:{change:function(t){}},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)]),t._v(" "),n("v-card-actions",[n("v-btn",{staticStyle:{"background-color":"#1d561a"},attrs:{dark:""},on:{click:function(e){t.end_time_menu=!1}}},[t._v("OK")])],1)],1)],1)],1),t._v(" "),n("v-flex",{staticClass:"text-xs-center"},[n("v-btn",{staticStyle:{margin:"10px"},attrs:{flat:"",outline:""},on:{click:function(e){t.getMissions()}}},[t._v("\n\t\t\t\t\t\t\t\tREFRESH\n\t\t\t\t\t\t\t")])],1)],1)],1)],1),t._v(" "),n("v-card",{staticStyle:{"margin-left":"20px","margin-right":"20px"}},[n("v-flex",{staticClass:"text-xs-center"},[n("v-btn",{staticStyle:{margin:"10px"},attrs:{flat:"",outline:""},on:{click:function(e){t.newMission()}}},[t._v("\n\t\t\t\t\t\tNEW FLIGHT PLAN\n\t\t\t\t\t")])],1)],1)],1),t._v(" "),n("v-layout",{attrs:{column:""}},[n("v-card",{staticStyle:{margin:"20px"}},[n("v-data-table",{attrs:{headers:t.headers,items:t.items,search:t.search,"rows-per-page-items":t.rppi},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",{on:{click:function(t){t.preventDefault(),e.expanded=!e.expanded}}},[n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.title))]),t._v(" "),n("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.commander))]),t._v(" "),n("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.num_drones))]),t._v(" "),n("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.starts_at))]),t._v(" "),n("td",{staticClass:"text-xs-center"},["DECLINED"==t._state(e.item.clearance)?n("v-icon",{attrs:{right:"",color:"red"}},[t._v("block")]):t._e(),t._v(" "),"PENDING"==t._state(e.item.clearance)?n("v-icon",{attrs:{right:"",color:"yellow"}},[t._v("error")]):t._e(),t._v(" "),"APPROVED"==t._state(e.item.clearance)?n("v-icon",{attrs:{right:"",color:"green"}},[t._v("check_circle")]):t._e()],1)])]}},{key:"pageText",fn:function(e){var n=e.pageStart,a=e.pageStop;return[t._v("\n\t\t\t\t\t\tFrom "+t._s(n)+" to "+t._s(a)+"\n\t\t\t\t\t")]}},{key:"expand",fn:function(e){return[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-layout",{attrs:{column:""}},[n("v-flex",[n("h2",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.item.title)+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),n("v-flex",[n("h4",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.item.description)+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),n("v-flex",[n("h4",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tStart Date/Time: "+t._s(e.item.starts_at)+"\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),n("h4",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tEnd Date/Time: "+t._s(e.item.ends_at)+"\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),n("h4",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tType: "+t._s(e.item.type)+"\n\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),t.is_gov_official?n("v-flex",[n("h4",[n("v-select",{attrs:{items:t.clearance_states,label:"Set Clearance","single-line":"",bottom:""},on:{input:function(n){t.update_clearance(e.item)}},model:{value:e.item.clearance.state,callback:function(n){t.$set(e.item.clearance,"state",n)},expression:"props.item.clearance.state"}})],1)]):t._e()],1),t._v(" "),n("v-layout",{attrs:{column:"","align-center":""}},[n("v-flex",{staticClass:"text-xs-center",staticStyle:{margin:"10px"}},[n("mapTemplate",{tag:"component",attrs:{mission:e.item}})],1)],1)],1),t._v(" "),n("v-layout",{attrs:{row:""}},[n("v-flex",{staticClass:"text-xs-center"},[n("v-btn",{attrs:{outline:"",flat:"",disabled:!t.can_delete(e.item.commander_id)},on:{click:function(n){t.deleteMission(e.item.id)}}},[n("v-icon",{staticStyle:{"margin-right":"5px"}},[t._v(" delete ")]),t._v("\n\t\t\t\t\t\t\t\t\t\t\tDELETE\n\t\t\t\t\t\t\t\t\t\t")],1),t._v(" "),n("v-btn",{attrs:{outline:"",flat:"",disabled:!t.can_delete(e.item.commander_id)},on:{click:function(n){t.goToMission(e.item.id)}}},[n("v-icon",{staticStyle:{"margin-right":"5px"}},[t._v(" map ")]),t._v("\n\t\t\t\t\t\t\t\t\t\t\tMAP\n\t\t\t\t\t\t\t\t\t\t")],1)],1)],1)],1)],1)]}}])})],1)],1)],1)],1)},d=[],u={render:m,staticRenderFns:d},v=u,_=n("VU/8"),f=a,g=_(l,v,!1,f,null,null);e.default=g.exports}});
//# sourceMappingURL=14.a001a91b31d4ff013054.js.map